{% extends "base-bootstrap.html" %}

{% block content %}

<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>

<body>
	<div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
		aria-hidden="true">
		<div class="modal-dialog" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title" id="exampleModalLabel"></h5>
					<button type="button" class="close" data-dismiss="modal" aria-label="Close">
						<span aria-hidden="true">&times;</span>
					</button>
				</div>
				<div class="modal-body" id="modalBody">
				</div>
				<div class="modal-footer" id="modalFooter">
					<!-- <button type="button" class="btn btn-secondary"
                                                data-dismiss="modal">Dismiss</button> -->
					<!-- <button type="button" class="btn btn-primary">Save
                                                changes</button> -->
				</div>
			</div>
		</div>
	</div>
	<div class="modal fade" id="Modal2" tabindex="-1" role="dialog" aria-labelledby="ModalLabel2"
		aria-hidden="true">
		<div class="modal-dialog" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title" id="ModalLabel2"></h5>
					<button type="button" class="close" data-dismiss="modal" aria-label="Close">
						<span aria-hidden="true">&times;</span>
					</button>
				</div>
				<div class="modal-body" id="modalBody2">
				</div>
				<div class="modal-footer" id="modalFooter2">
				</div>
			</div>
		</div>
	</div>
	<ul style="display:none">
		{% for images in imagelist %}
            <li class="imageclass">{{images}}</li>
        {% endfor %}
	</ul>

	<h6 class="display-4 mb-3 container" style="font-size: 40px;">Settings</h6>
	<div class="container border shadow p-4">
		<h6 class="display-4 mb-3" style="font-size: 30px;">Labelling</h6>
		<div class="row mb-2">
			<div class="col">
				<div class="form-group">
					<h6 for="email">Add Label :</h6>
					<input class="form-control input-sm" type="text" placeholder="Label Name" id="labelname">
				</div>
				<button id="save" class="btn btn-sm btn-primary" onclick='addlabel()'>Add</button>
				<button id="deleteall" class="btn btn-sm btn-danger" onclick='deletelabelall()'>Delete All</button>
				<br>
				<br>
				<div class="border p-4 bg-white overflow-auto" style="height:220px">
				
					<div id="labellist">
						<table cellpadding='5' cellspacing='5'>
							<!-- <th>Label Name</th>
                                                <th>Color</th> -->
							{% for item in labeldata %}
							<tr>
								<td class="labelclass">{{item[0]}}</td>
								<td class="labelcolor" style="display:none">{{item[1]}}</td>
								<td><button class="btn btn-sm mr-3"
										style='background-color:{{item[1]}}; height: 20px; width: 20px'
										></button></td>
								<td><button class='btn btn-danger btn-sm' id='deletelabelbtn'
										onclick='deletelabel("{{item[0]}}","{{item[1]}}")'
										style='background-color:red'>Del
								</td>
							</tr>
							{% endfor %}
						</table>
					</div>
				</div>
			</div>
		</div>
		<div class="mb-2">
			<h6 class="display-4 mb-3" style="font-size: 30px;">Canvas Dimensions</h6>
			{% if canvasdata|length %}
				{% for item in canvasdata %}
				<h6> Canvas Width : {{item[0]}}</h6>
				<h6> Canvas Height : {{item[1]}}</h6>
				{% endfor %}
			{% else %}
				<h6> Canvas Width : Not Set</h6>
				<h6> Canvas Height : Not Set</h6>
				<font color="red">Please set canvas dimensions! Unset configurations will cause error on annotations page.</font>
			{% endif %}
			<button onclick="location.href = 'resizeconfig';" class="btn btn-sm btn-primary mt-2" type="button">Resize Canvas</button>
		</div>
		<div class="mb-2">
			<h6 class="display-4 mb-3" style="font-size: 30px;">Load Image</h6>
			<h6>Total Images Loaded : <h6 id="totalimagenumber"></h6></h6>
			{% with messages = get_flashed_messages() %}
                    {% if messages %}
                    <div class="alert alert-success alert-dismissible fade show" role="alert">
                        <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                        {{ messages[0] }}
                    </div>
                    {% endif %}
                    {% endwith %}
			<button onclick="viewimage()"  class="btn btn-sm btn-primary mt-2" type="button">View Image</button>
			<form method="POST" action="/loadimage" enctype = "multipart/form-data">
				<button class="btn btn-sm btn-success mt-2">Load Image</button>
				<input  id="file-input" type="file" name="files[]" multiple />
			</form>
			<font color="red">Allowed extensions are PNG, JPG, and JPEG.</font>
		</div>
		<div class="mb-2">
			<h6 class="display-4 mb-3" style="font-size: 30px;">Annotations</h6>
			<button  class="btn btn-sm btn-success mt-2" type="button" data-toggle="collapse" data-target="#collapseDownloadimage" aria-expanded="false" aria-controls="collapseDownloadimage">Download Image</button>
			<a href="{{ url_for('.download_result') }}"><button  class="btn btn-sm btn-success mt-2" type="button">Download CSV</button></a>
			<button  class="btn btn-sm btn-success mt-2" type="button" >View All Statistics</button>

			<div class="collapse" id="collapseDownloadimage">
  				<div class="card card-body mt-2" id="collapseBody">
    				<h6>Choose which image to download :</h6>
					<ul>
					{% for images in imagelist %}
						<a href="{{ url_for('.download_image', filename='{{images}}' ) }}"><li>{{images}}</li></a>
					{% endfor %}
					</ul>
  				</div>
			</div>
			
		</div>
	</div>
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css">
	<script src=" {{ url_for('static', filename='script-settings.js') }}"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"></script> 
	
</body>

</html>

{% endblock %}